<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Using parts of mapping from base class | XData website </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Using parts of mapping from base class | XData website ">
    <meta name="generator" content="docfx 2.48.0.0">
    
    <link rel="shortcut icon" href="../.././images/cube.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../.././images/cube-white.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="using-parts-of-mapping-from-base-class">Using parts of mapping from base class</h2>

<p>* The example given here is divorced from reality. More important here is to provide a simple and understandable example of the use of map inheritance. And You must to decide whether or not to use this opportunity to take in each specific project situation.</p>
<p>1) Suppose we have a database of the following structure...</p>
<div class="lang-plantUml" \=""> <?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="233px" preserveaspectratio="none" style="width:258px;height:233px;" version="1.1" viewbox="0 0 258 233" width="258px" zoomandpan="magnify"><defs><filter height="300%" id="fbynhk0e71mls" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><!--MD5=[5ea577eca533bfca935d04f775d3f167]
class t_doc--><rect fill="#FFFFFF" filter="url(#fbynhk0e71mls)" height="65.5781" id="t_doc" style="stroke: #000000; stroke-width: 1.0;" width="61.3333" x="15.5" y="6"></rect><rect fill="#D3D3D3" height="23.9688" style="stroke: #000000; stroke-width: 1.0;" width="61.3333" x="15.5" y="6"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="33" x="29.6667" y="22.1387">t_doc</text><line style="stroke: #000000; stroke-width: 1.5;" x1="16.5" x2="75.8333" y1="29.9688" y2="29.9688"></line><path d="M27.5417,36.6901 C26.2767,36.6901 25.25,37.7168 25.25,38.9818 C25.25,39.1284 25.2803,39.254 25.3078,39.3833 L22.5,42.191 L22.5,44.0244 L25.25,44.0244 L25.25,42.191 L27.0833,42.191 L27.0833,41.2744 L27.1411,41.2166 C27.2694,41.2441 27.395,41.2744 27.5426,41.2744 C28.8076,41.2744 29.8342,40.2477 29.8342,38.9827 C29.8342,37.7177 28.8076,36.691 27.5426,36.691 M28.0009,37.6077 C28.5051,37.6077 28.9176,38.0202 28.9176,38.5244 C28.9176,39.0285 28.5051,39.441 28.0009,39.441 C27.4968,39.441 27.0843,39.0285 27.0843,38.5244 C27.0843,38.0202 27.4968,37.6077 28.0009,37.6077 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"></path><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="36" x="34.8333" y="44.1792">doc_id</text><line style="stroke: #000000; stroke-width: 1.0;" x1="16.5" x2="75.8333" y1="50.7734" y2="50.7734"></line><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="32" x="21.5" y="64.9839">numb</text><!--MD5=[b7e230e1778b9287fe97f7db08279b34]
class t_doc_date--><rect fill="#FFFFFF" filter="url(#fbynhk0e71mls)" height="78.3828" id="t_doc_date" style="stroke: #000000; stroke-width: 1.0;" width="80.3333" x="6" y="144"></rect><rect fill="#D3D3D3" height="23.9688" style="stroke: #000000; stroke-width: 1.0;" width="80.3333" x="6" y="144"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="66" x="13.1667" y="160.1387">t_doc_date</text><line style="stroke: #000000; stroke-width: 1.5;" x1="7" x2="85.3333" y1="167.9688" y2="167.9688"></line><path d="M18.0417,174.6901 C16.7767,174.6901 15.75,175.7168 15.75,176.9818 C15.75,177.1284 15.7802,177.254 15.8078,177.3833 L13,180.191 L13,182.0244 L15.75,182.0244 L15.75,180.191 L17.5833,180.191 L17.5833,179.2744 L17.6411,179.2166 C17.7694,179.2441 17.895,179.2744 18.0426,179.2744 C19.3076,179.2744 20.3342,178.2477 20.3342,176.9827 C20.3342,175.7177 19.3076,174.691 18.0426,174.691 M18.5009,175.6077 C19.0051,175.6077 19.4176,176.0202 19.4176,176.5244 C19.4176,177.0285 19.0051,177.441 18.5009,177.441 C17.9968,177.441 17.5843,177.0285 17.5843,176.5244 C17.5843,176.0202 17.9968,175.6077 18.5009,175.6077 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"></path><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="36" x="25.3333" y="182.1792">doc_id</text><path d="M18.0417,187.4948 C16.7767,187.4948 15.75,188.5215 15.75,189.7865 C15.75,189.9331 15.7802,190.0587 15.8078,190.188 L13,192.9957 L13,194.829 L15.75,194.829 L15.75,192.9957 L17.5833,192.9957 L17.5833,192.079 L17.6411,192.0213 C17.7694,192.0488 17.895,192.079 18.0426,192.079 C19.3076,192.079 20.3342,191.0524 20.3342,189.7874 C20.3342,188.5224 19.3076,187.4957 18.0426,187.4957 M18.5009,188.4124 C19.0051,188.4124 19.4176,188.8249 19.4176,189.329 C19.4176,189.8332 19.0051,190.2457 18.5009,190.2457 C17.9968,190.2457 17.5843,189.8332 17.5843,189.329 C17.5843,188.8249 17.9968,188.4124 18.5009,188.4124 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"></path><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="55" x="25.3333" y="194.9839">date_kind</text><line style="stroke: #000000; stroke-width: 1.0;" x1="7" x2="85.3333" y1="201.5781" y2="201.5781"></line><path d="M16.6667,208.2995 C14.6473,208.2995 13,209.9467 13,211.9661 C13,213.9856 14.6473,215.6328 16.6667,215.6328 C18.6861,215.6328 20.3333,213.9856 20.3333,211.9661 C20.3333,209.9467 18.6861,208.2995 16.6667,208.2995 M16.6667,209.2161 C18.1911,209.2161 19.4167,210.4417 19.4167,211.9661 C19.4167,213.4906 18.1911,214.7161 16.6667,214.7161 C15.1423,214.7161 13.9167,213.4906 13.9167,211.9661 C13.9167,210.4417 15.1423,209.2161 16.6667,209.2161 M16.2083,210.1328 L16.2083,212.1669 L16.3513,212.2815 L16.8097,212.7398 L17.125,213.0836 L17.7841,212.4245 L17.4403,212.1091 L17.125,211.7938 L17.125,210.1319 L16.2083,210.1319 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"></path><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="52" x="25.3333" y="215.7886">doc_date</text><!--MD5=[4ed4cd12cd2eeb59e644791b1ec40217]
class t_doc_spec--><rect fill="#FFFFFF" filter="url(#fbynhk0e71mls)" height="65.5781" id="t_doc_spec" style="stroke: #000000; stroke-width: 1.0;" width="94.3333" x="138" y="6"></rect><rect fill="#D3D3D3" height="23.9688" style="stroke: #000000; stroke-width: 1.0;" width="94.3333" x="138" y="6"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="69" x="150.6667" y="22.1387">t_doc_spec</text><line style="stroke: #000000; stroke-width: 1.5;" x1="139" x2="231.3333" y1="29.9688" y2="29.9688"></line><path d="M150.0417,36.6901 C148.7767,36.6901 147.75,37.7168 147.75,38.9818 C147.75,39.1284 147.7803,39.254 147.8078,39.3833 L145,42.191 L145,44.0244 L147.75,44.0244 L147.75,42.191 L149.5833,42.191 L149.5833,41.2744 L149.6411,41.2166 C149.7694,41.2441 149.895,41.2744 150.0426,41.2744 C151.3076,41.2744 152.3343,40.2477 152.3343,38.9827 C152.3343,37.7177 151.3076,36.691 150.0426,36.691 M150.5009,37.6077 C151.0051,37.6077 151.4176,38.0202 151.4176,38.5244 C151.4176,39.0285 151.0051,39.441 150.5009,39.441 C149.9968,39.441 149.5843,39.0285 149.5843,38.5244 C149.5843,38.0202 149.9968,37.6077 150.5009,37.6077 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"></path><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="69" x="157.3333" y="44.1792">doc_spec_id</text><line style="stroke: #000000; stroke-width: 1.0;" x1="139" x2="231.3333" y1="50.7734" y2="50.7734"></line><path d="M148.6667,57.4948 C146.6408,57.4948 145,59.1356 145,61.1615 C145,63.1873 146.6408,64.8281 148.6667,64.8281 C150.6925,64.8281 152.3333,63.1873 152.3333,61.1615 C152.3333,59.1356 150.6925,57.4948 148.6667,57.4948 M148.6667,58.4115 L151.4167,61.1615 L148.6667,63.9115 L148.6667,62.0781 L145.9167,62.0781 L145.9167,60.2448 L148.6667,60.2448 L148.6667,58.4115 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"></path><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="36" x="157.3333" y="64.9839">doc_id</text><!--MD5=[025ac326a6ab31b45989aa42f37da176]
class t_doc_spec_amount--><rect fill="#FFFFFF" filter="url(#fbynhk0e71mls)" height="65.5781" id="t_doc_spec_amount" style="stroke: #000000; stroke-width: 1.0;" width="125" x="122.5" y="150"></rect><rect fill="#D3D3D3" height="23.9688" style="stroke: #000000; stroke-width: 1.0;" width="125" x="122.5" y="150"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="119" x="125.5" y="166.1387">t_doc_spec_amount</text><line style="stroke: #000000; stroke-width: 1.5;" x1="123.5" x2="246.5" y1="173.9688" y2="173.9688"></line><path d="M134.5417,180.6901 C133.2767,180.6901 132.25,181.7168 132.25,182.9818 C132.25,183.1284 132.2803,183.254 132.3078,183.3833 L129.5,186.191 L129.5,188.0244 L132.25,188.0244 L132.25,186.191 L134.0833,186.191 L134.0833,185.2744 L134.1411,185.2166 C134.2694,185.2441 134.395,185.2744 134.5426,185.2744 C135.8076,185.2744 136.8343,184.2477 136.8343,182.9827 C136.8343,181.7177 135.8076,180.691 134.5426,180.691 M135.0009,181.6077 C135.5051,181.6077 135.9176,182.0202 135.9176,182.5244 C135.9176,183.0285 135.5051,183.441 135.0009,183.441 C134.4968,183.441 134.0843,183.0285 134.0843,182.5244 C134.0843,182.0202 134.4968,181.6077 135.0009,181.6077 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"></path><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="69" x="141.8333" y="188.1792">doc_spec_id</text><line style="stroke: #000000; stroke-width: 1.0;" x1="123.5" x2="246.5" y1="194.7734" y2="194.7734"></line><path d="M132.25,201.4948 L132.25,202.4115 L131.5625,202.4115 C130.9337,202.4115 130.4167,202.9285 130.4167,203.5573 L130.4167,204.0156 C130.4167,204.6371 130.8173,205.1541 131.4195,205.3045 L133.7689,205.9058 C133.9,205.9388 134.0843,206.1771 134.0843,206.3073 L134.0843,206.7656 C134.0843,206.8885 133.9779,206.9948 133.8551,206.9948 L131.5634,206.9948 C131.4571,206.9948 131.3691,206.9609 131.3343,206.937 L131.3343,206.0772 L130.4176,206.0772 L130.4176,206.9939 C130.4176,207.3074 130.6037,207.5686 130.8191,207.7098 C131.0336,207.8519 131.2939,207.9105 131.5643,207.9105 L132.2518,207.9105 L132.2518,208.8272 L133.1685,208.8272 L133.1685,207.9105 L133.856,207.9105 C134.4848,207.9105 135.0018,207.3935 135.0018,206.7647 L135.0018,206.3064 C135.0018,205.6849 134.6013,205.1679 133.999,205.0175 L131.6496,204.4162 C131.5185,204.3832 131.3343,204.1449 131.3343,204.0147 L131.3343,203.5564 C131.3343,203.4335 131.4406,203.3272 131.5634,203.3272 L133.8551,203.3272 C133.9614,203.3272 134.0494,203.3611 134.0843,203.385 L134.0843,204.2448 L135.0009,204.2448 L135.0009,203.3281 C135.0009,203.0146 134.8148,202.7534 134.5994,202.6122 C134.3849,202.4701 134.1246,202.4115 133.8542,202.4115 L133.1667,202.4115 L133.1667,201.4948 L132.25,201.4948 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"></path><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="43" x="141.8333" y="208.9839">amount</text><!--MD5=[d8af03929ab85326d3ff8963ed505034]
link t_doc to t_doc_date--><path d="M46,72.222 C46,91.004 46,115.009 46,135.7787 " fill="none" id="t_doc-&gt;t_doc_date" style="stroke: #000000; stroke-width: 1.0;"></path><line style="stroke: #000000; stroke-width: 1.0;" x1="46" x2="54" y1="135.8591" y2="143.8591"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="46" x2="38" y1="135.8591" y2="143.8591"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="46" x2="46" y1="135.8591" y2="143.8591"></line><text fill="#000000" font-family="sans-serif" font-size="8" lengthadjust="spacingAndGlyphs" textlength="25" x="47" y="110.4258">doc_id</text><!--MD5=[cef6fc7600387b202b7e697154b0ecaf]
link t_doc to t_doc_spec--><path d="M76.5041,39 C92.0971,39 111.562,39 129.684,39 " fill="none" id="t_doc-&gt;t_doc_spec" style="stroke: #000000; stroke-width: 1.0;"></path><line style="stroke: #000000; stroke-width: 1.0;" x1="129.896" x2="137.896" y1="39" y2="31"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="129.896" x2="137.896" y1="39" y2="47"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="129.896" x2="137.896" y1="39" y2="39"></line><text fill="#000000" font-family="sans-serif" font-size="8" lengthadjust="spacingAndGlyphs" textlength="25" x="94.75" y="32.4258">doc_id</text><!--MD5=[542647722f52d6ccd9b263e63b85e2d8]
link t_doc_spec to t_doc_spec_amount--><path d="M185,72.222 C185,92.829 185,119.722 185,141.7322 " fill="none" id="t_doc_spec-&gt;t_doc_spec_amount" style="stroke: #000000; stroke-width: 1.0;"></path><line style="stroke: #000000; stroke-width: 1.0;" x1="185" x2="191" y1="141.9055" y2="149.9055"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="185" x2="179" y1="141.9055" y2="149.9055"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="185" x2="185" y1="141.9055" y2="149.9055"></line><ellipse cx="185" cy="135.9055" fill="none" rx="4" ry="4" style="stroke: #000000; stroke-width: 1.0;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="8" lengthadjust="spacingAndGlyphs" textlength="46" x="186" y="110.4258">doc_spec_id</text><!--MD5=[501d614aa0835685237bf46a7dfec613]
@startuml


hide circle
skinparam ClassHeaderBackgroundColor lightgray
skinparam ClassBorderColor black
skinparam ClassBorderThickness 1
skinparam ClassBackgroundColor transparent
skinparam ArrowFontSize 8
skinparam ArrowColor black

entity t_doc
{
   <&key> doc_id
   - -
   numb
}

entity t_doc_date
{
   <&key> doc_id
   <&key> date_kind
   - -
   <&clock> doc_date
}
t_doc - -{ t_doc_date : doc_id

entity t_doc_spec
{
   <&key> doc_spec_id
   - -
   <&arrow-circle-right> doc_id
}
t_doc -right-{ t_doc_spec : doc_id

entity t_doc_spec_amount
{
   <&key> doc_spec_id
   - -
   <&dollar> amount
}
t_doc_spec - -o{ t_doc_spec_amount : doc_spec_id
@enduml

PlantUML version 1.2020.12(Sat Jun 06 10:54:15 UTC 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg> </div><p>2) According to the application logic, we have a class structure...</p>
<div class="lang-plantUml" \=""> <?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="220px" preserveaspectratio="none" style="width:280px;height:220px;" version="1.1" viewbox="0 0 280 220" width="280px" zoomandpan="magnify"><defs><filter height="300%" id="f1j5za0ckiybiy" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><!--MD5=[f38cdfa93a4420874a477654256d5f0f]
class Doc--><rect fill="#FFFFFF" filter="url(#f1j5za0ckiybiy)" height="78.3828" id="Doc" style="stroke: #000000; stroke-width: 1.0;" width="123" x="6" y="6"></rect><rect fill="#FFFFFF" height="23.9688" style="stroke: #000000; stroke-width: 1.0;" width="123" x="6" y="6"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="24" x="55.5" y="22.1387">Doc</text><line style="stroke: #000000; stroke-width: 1.5;" x1="7" x2="128" y1="29.9688" y2="29.9688"></line><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="60" x="12" y="44.1792">long DocId</text><line style="stroke: #000000; stroke-width: 1.0;" x1="7" x2="128" y1="50.7734" y2="50.7734"></line><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="111" x="12" y="64.9839">DateTime DocDate</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="68" x="12" y="77.7886">string Numb</text><!--MD5=[c3682c00519be24b748d419855c05489]
class DocSpec--><rect fill="#FFFFFF" filter="url(#f1j5za0ckiybiy)" height="65.5781" id="DocSpec" style="stroke: #000000; stroke-width: 1.0;" width="101" x="165" y="12"></rect><rect fill="#FFFFFF" height="23.9688" style="stroke: #000000; stroke-width: 1.0;" width="101" x="165" y="12"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="55" x="188" y="28.1387">DocSpec</text><line style="stroke: #000000; stroke-width: 1.5;" x1="166" x2="265" y1="35.9688" y2="35.9688"></line><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="89" x="171" y="50.1792">long DocSpecId</text><line style="stroke: #000000; stroke-width: 1.0;" x1="166" x2="265" y1="56.7734" y2="56.7734"></line><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="60" x="171" y="70.9839">long DocId</text><!--MD5=[894442645724153f40a9f7a43026dbfc]
class Invoice--><rect fill="#FFFFFF" filter="url(#f1j5za0ckiybiy)" height="65.5781" id="Invoice" style="stroke: #000000; stroke-width: 1.0;" width="123" x="6" y="144"></rect><rect fill="#FFFFFF" height="23.9688" style="stroke: #000000; stroke-width: 1.0;" width="123" x="6" y="144"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="43" x="46" y="160.1387">Invoice</text><line style="stroke: #000000; stroke-width: 1.5;" x1="7" x2="128" y1="167.9688" y2="167.9688"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="7" x2="128" y1="175.9688" y2="175.9688"></line><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="93" x="12" y="190.1792">decimal Amount</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="111" x="12" y="202.9839">InvoiceSpec[] Spec</text><!--MD5=[da5f0169623022e12a96aadf2be5bc74]
class InvoiceSpec--><rect fill="#FFFFFF" filter="url(#f1j5za0ckiybiy)" height="52.7734" id="InvoiceSpec" style="stroke: #000000; stroke-width: 1.0;" width="105" x="164" y="150.5"></rect><rect fill="#FFFFFF" height="23.9688" style="stroke: #000000; stroke-width: 1.0;" width="105" x="164" y="150.5"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="74" x="179.5" y="166.6387">InvoiceSpec</text><line style="stroke: #000000; stroke-width: 1.5;" x1="165" x2="268" y1="174.4688" y2="174.4688"></line><line style="stroke: #000000; stroke-width: 1.0;" x1="165" x2="268" y1="182.4688" y2="182.4688"></line><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="93" x="170" y="196.6792">decimal Amount</text><!--MD5=[741b2ac005bca3f334b15562c9c82984]
reverse link Doc to Invoice--><path d="M67.5,104.722 C67.5,118.1162 67.5,131.869 67.5,143.6772 " fill="none" id="Doc&lt;-Invoice" style="stroke: #000000; stroke-width: 1.0;"></path><polygon fill="none" points="60.5001,104.301,67.5,84.301,74.5001,104.301,60.5001,104.301" style="stroke: #000000; stroke-width: 1.0;"></polygon><!--MD5=[790b08f7f34e4d01ba6cceac3d1b6d1f]
reverse link DocSpec to InvoiceSpec--><path d="M215.902,98.224 C216.04,116.159 216.188,135.4454 216.303,150.3259 " fill="none" id="DocSpec&lt;-InvoiceSpec" style="stroke: #000000; stroke-width: 1.0;"></path><polygon fill="none" points="208.901,98.188,215.747,78.135,222.901,98.08,208.901,98.188" style="stroke: #000000; stroke-width: 1.0;"></polygon><!--MD5=[63e17fbfafe6c8b9398044e8eea0dca8]
reverse link Doc to DocSpec--><path d="M142.211,45 C149.76,45 157.309,45 164.858,45 " fill="none" id="Doc&lt;-DocSpec" style="stroke: #000000; stroke-width: 1.0;"></path><polygon fill="#000000" points="129.07,45,135.07,49,141.07,45,135.07,41,129.07,45" style="stroke: #000000; stroke-width: 1.0;"></polygon><!--MD5=[ece9c93eb4644dbe024812fb02b184b4]
@startuml


hide circle
skinparam ClassHeaderBackgroundColor white
skinparam ClassBorderColor black
skinparam ClassBorderThickness 1
skinparam ClassBackgroundColor transparent
skinparam ArrowFontSize 8
skinparam ArrowColor black

class Doc {
long DocId
- -
DateTime DocDate
string Numb
}

class DocSpec {
long DocSpecId
- -
long DocId
}

class Invoice {
- -
decimal Amount
InvoiceSpec[] Spec
}

class InvoiceSpec {
- -
decimal Amount
}

Doc <|- - Invoice
DocSpec <|- - InvoiceSpec
Doc *-right- DocSpec
@enduml

PlantUML version 1.2020.12(Sat Jun 06 10:54:15 UTC 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg> </div><p>3) Mapping <em>Doc</em> and <em>DocSpec</em> are understandable (for those who don’t know how mapping is done in XData it is recommended to read the first lesson first)</p>
<pre><code class="lang-csharp">using System.Linq.Expressions;
using XData;
using XData.Mapping.Dynamic;

namespace &lt;..Your namespace..&gt;.Models
{
    public partial class Doc : IDataObject
    {
        private static Expression&lt;CustomMapping&lt;Doc&gt;&gt; _ =
            () =&gt; XDataMapping.CustomMapping&lt;Doc&gt;()
                .DataTable(&quot;T_DOC&quot;, &quot;D&quot;)
                .DataTable(&quot;T_DOC_DATE&quot;, &quot;DD&quot;, x =&gt; x.Link(&quot;D&quot;, &quot;doc_id&quot;), 
                    x =&gt; x.ConstFilter(&quot;DocDate&quot;, &quot;date_kind&quot;, DocDateKind.DocDate))
                .ReadOnlyProperty(x =&gt; x.DocId, 
                    x =&gt; x.Field&lt;long&gt;(&quot;D&quot;, string.Empty, z =&gt; z.Key(), 
                        z =&gt; z.Default(DefaultType.AutoIncrement)))
                .Map(x =&gt; new Doc {
                    DocDate = x.Field&lt;DateTime&gt;(&quot;DD&quot;, string.Empty),
                    Numb = x.Field&lt;string&gt;(&quot;D&quot;, string.Empty)
                }).SetBaseTable(&quot;D&quot;);
    }
}
</code></pre><pre><code class="lang-csharp">using System.Linq.Expressions;
using XData;
using XData.Mapping.Dynamic;

namespace &lt;..Your namespace..&gt;.Models
{
    public partial class DocSpec : IDataObject
    {
        private static Expression&lt;CustomMapping&lt;DocSpec&gt;&gt; _ =
            () =&gt; XDataMapping.CustomMapping&lt;DocSpec&gt;()
                .DataTable(&quot;T_DOC_SPEC&quot;, &quot;DS&quot;)
                .ReadOnlyProperty(x =&gt; x.DocSpecId, 
                    x =&gt; x.Field&lt;long&gt;(&quot;DS&quot;, string.Empty, z =&gt; z.Key(), 
                        z =&gt; z.Default(DefaultType.AutoIncrement)))
                .Map(x =&gt; new DocSpec {
                    DocId = x.Field&lt;long&gt;(&quot;DS&quot;, string.Empty),
                }).SetBaseTable(&quot;DS&quot;);
    }
}
</code></pre><p>4) Add <em>InvoiceSpec</em> mapping</p>
<pre><code class="lang-csharp">using System.Linq.Expressions;
using XData;
using XData.Mapping.Dynamic;

namespace &lt;..Your namespace..&gt;.Models
{
    public partial class InvoiceSpec : IDataObject
    {
        private static Expression&lt;CustomMapping&lt;InvoiceSpec&gt;&gt; _ =
            () =&gt; XDataMapping.UseMapping&lt;InvoiceSpec&gt;()
                .DataTable(&quot;T_DOC_SPEC_AMOUNT&quot;, &quot;SA&quot;, &quot;DS&quot;, 
                    x =&gt; x.Link(&quot;DS&quot;, &quot;doc_spc_id&quot;))
                .Map(x =&gt; new InvoiceSpec{
                    Amount = x.Field&lt;decimal&gt;(&quot;SA&quot;, string.Empty)
                });
    }
}
</code></pre><p>* Of course, in this case there was absolutely no reason to use inheritance, but for training purposes...</p>
<p>5) Here, the only new but very important thing for us is the use of the <a class="xref" href="../../api/XData.Mapping.Dynamic.XDataMapping.html#XData_Mapping_Dynamic_XDataMapping_UseMapping__1">XDataMapping.UseMapping</a> method to initiate mapping based on the mapping of the base class.</p>
<p>6) Add <em>Invoice</em> mapping</p>
<pre><code class="lang-csharp">using System.Linq.Expressions;
using XData;
using XData.Mapping.Dynamic;

namespace &lt;..Your namespace..&gt;.Models
{
    public partial class Invoice : Doc
    {
        private static Expression&lt;CustomMapping&lt;Invoice&gt;&gt; _ =
            () =&gt; XDataMapping.UseMapping&lt;Invoice&gt;()
                .Subquery&lt;DocSpecAmount&gt;(&quot;A&quot;, x =&gt; x.GetProperty(&quot;Amount&quot;), 
                    DataGrouping.Sum, x =&gt; x.SubqueryLink(z =&gt; z.DocId))
                .ReadOnlyProperty(x =&gt; x.Amount, 
                    x =&gt; x.Expr&lt;decimal?&gt;(null, DataExpressionType.SubQuery, 
                        &quot;A&quot;, DbType.Decimal, z =&gt; z.Size(17, 5)))
                .Map();
    }
}
</code></pre><p>7) Add service object <em>DocSpecAmount</em> to use in <em>Subquery</em> defining</p>
<pre><code class="lang-csharp">public class DocSpecAmount: ISqlObject
{
    private static Expression&lt;CustomMapping&lt;DocSpecAmount&gt;&gt; _ = (
        () =&gt; XDataMapping.CustomMapping&lt;DocSpecAmount&gt;()
            .DataTable(&quot;T_DOC_SPEC&quot;, &quot;DS&quot;)
            .DataTable(&quot;T_DOC_SPEC_AMOUNT&quot;, &quot;SA&quot;, &quot;DS&quot;, 
                    x =&gt; x.Link(&quot;DS&quot;, &quot;doc_spc_id&quot;))
            .Column(&quot;DocId&quot;, x =&gt; x.Field&lt;long&gt;(&quot;DS&quot;, string.Empty, 
                z =&gt; z.Hidden()))
            .Column(&quot;Amount&quot;, x =&gt; x.Field&lt;decimal&gt;(&quot;SA&quot;, string.Empty))
            .Map().SetBaseTable(&quot;DS&quot;));
}
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/mickfierte/private/blob/main/doc/quick_start/inheritance/base_class.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
