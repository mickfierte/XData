<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>First mapping | XData website </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="First mapping | XData website ">
    <meta name="generator" content="docfx 2.48.0.0">
    
    <link rel="shortcut icon" href="../.././images/cube.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../.././images/cube-white.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="first-mapping">First mapping</h2>

<p>1) Add table <em>T_DOC_STATE</em> to database...</p>
<div class="lang-plantUml" \=""> <?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentscripttype="application/ecmascript" contentstyletype="text/css" height="96px" preserveaspectratio="none" style="width:115px;height:96px;" version="1.1" viewbox="0 0 115 96" width="115px" zoomandpan="magnify"><defs><filter height="300%" id="f1r0i9f93gwuwa" width="300%" x="-1" y="-1"><fegaussianblur result="blurOut" stddeviation="2.0"></fegaussianblur><fecolormatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></fecolormatrix><feoffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"></feoffset><feblend in="SourceGraphic" in2="blurOut3" mode="normal"></feblend></filter></defs><g><!--MD5=[4efa0cfa5e1d38a4afda4e219b98680a]
class t_doc_state--><rect fill="#FFFFFF" filter="url(#f1r0i9f93gwuwa)" height="78.3828" id="t_doc_state" style="stroke: #000000; stroke-width: 1.0;" width="97.3333" x="7" y="7"></rect><rect fill="#D3D3D3" height="23.9688" style="stroke: #000000; stroke-width: 1.0;" width="97.3333" x="7" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthadjust="spacingAndGlyphs" textlength="73" x="19.1667" y="23.1387">t_doc_state</text><line style="stroke: #000000; stroke-width: 1.5;" x1="8" x2="103.3333" y1="30.9688" y2="30.9688"></line><path d="M19.0417,37.6901 C17.7767,37.6901 16.75,38.7168 16.75,39.9818 C16.75,40.1284 16.7803,40.254 16.8078,40.3833 L14,43.191 L14,45.0244 L16.75,45.0244 L16.75,43.191 L18.5833,43.191 L18.5833,42.2744 L18.6411,42.2166 C18.7694,42.2441 18.895,42.2744 19.0426,42.2744 C20.3076,42.2744 21.3342,41.2477 21.3342,39.9827 C21.3342,38.7177 20.3076,37.691 19.0426,37.691 M19.5009,38.6077 C20.0051,38.6077 20.4176,39.0202 20.4176,39.5244 C20.4176,40.0285 20.0051,40.441 19.5009,40.441 C18.9968,40.441 18.5843,40.0285 18.5843,39.5244 C18.5843,39.0202 18.9968,38.6077 19.5009,38.6077 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"></path><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="72" x="26.3333" y="45.1792">doc_state_id</text><line style="stroke: #000000; stroke-width: 1.0;" x1="8" x2="103.3333" y1="51.7734" y2="51.7734"></line><path d="M18.5833,59.4115 L15.8333,64.9115 L16.75,64.9115 L19.5,59.4115 L18.5833,59.4115 M14.9167,60.3281 L14,62.1615 L14.9167,63.9948 L15.8333,63.9948 L14.9167,62.1615 L15.8333,60.3281 L14.9167,60.3281 M19.5,60.3281 L20.4167,62.1615 L19.5,63.9948 L20.4167,63.9948 L21.3333,62.1615 L20.4167,60.3281 L19.5,60.3281 " fill="#000000" style="stroke: ; stroke-width: 0.0; stroke-dasharray: ;"></path><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="28" x="26.3333" y="65.9839">code</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthadjust="spacingAndGlyphs" textlength="33" x="13" y="78.7886">name</text><!--MD5=[a58f752ac1419c448984de3fd47aa5cb]
@startuml


hide circle
skinparam ClassHeaderBackgroundColor lightgray
skinparam ClassBorderColor black
skinparam ClassBorderThickness 1
skinparam ClassBackgroundColor transparrent
skinparam ArrowFontSize 8
skinparam ArrowColor black

entity t_doc_state
{
   <&key> doc_state_id
   - -
   <&code> code
   name
}
@enduml

PlantUML version 1.2020.08beta7(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14.0.1+7
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg> </div><p>2) Add <em>Model</em> class <em>DocState.cs</em> in a <em>Models</em> folder...</p>
<pre><code class="lang-csharp">using XData;

namespace &lt;..Your namespace..&gt;.Models
{
    public partial class DocState
    {
        public long DocStateId =&gt; this.GetProperty(x =&gt; x.DocStateId);
        public string Code { get; set; }
        public string Name { get; set; }
    }
}
</code></pre><div class="TIP"><h5>Tip</h5><p>The class is marked as partial because mapping will be added to another part of its description. It&#39;s comfortable.</p>
</div>
<div class="TIP"><h5>Tip</h5><p>Notice that the id field is marked as read-only. Note also that when using the XData, this DTO mapping is not required (absolutely!!! See <a href="../../tips/json.html">documentation topic</a> for more details). This allows you to more correctly use the model classes and more closely match the ideology of <a href="https://en.wikipedia.org/wiki/Domain-driven_design">DDD</a>.</p>
</div>
<div class="NOTE"><h5>Note</h5><p>Errors and warnings may occur before adding mapping. Ignore them. While we will not describe the <em>GetProperty</em> method, we will return to it later</p>
</div>
<p>3) Add class <em>DocState.xdata.cs</em> in a <em>Models</em> folder and define mapping...</p>
<pre><code class="lang-csharp">using System.Linq.Expressions;
using XData;
using XData.Mapping.Dynamic;

namespace &lt;..Your namespace..&gt;.Models
{
    public partial class DocState : IDataObject
    {
        private static Expression&lt;CustomMapping&lt;DocState&gt;&gt; _ =
            () =&gt; XDataMapping.CustomMapping&lt;DocState&gt;()
                .DataTable(&quot;T_DOC_STATE&quot;, &quot;S&quot;)
                .ReadOnlyProperty(x =&gt; x.DocStateId, 
                    x =&gt; x.Field&lt;long&gt;(&quot;S&quot;, string.Empty, z =&gt; z.Key(), 
                        z =&gt; z.Default(DefaultType.AutoIncrement)))
                .Map(x =&gt; new DocState {
                    Code = x.Field&lt;string&gt;(&quot;S&quot;, string.Empty),
                    Name = x.Field&lt;string&gt;(&quot;S&quot;, string.Empty)
                }).SetBaseTable(&quot;S&quot;);
    }
}
</code></pre><p>4) Now errors have been gone... Let&#39;s look at the mapping structure... </p>
<p>5) The table is described by the <a class="xref" href="../../api/XData.Mapping.Dynamic.IRepositoryStructure-1.html#XData_Mapping_Dynamic_IRepositoryStructure_1_DataTable_System_String_System_String_System_Linq_Expressions_Expression_System_Func_XData_Mapping_Dynamic_IInnerFilterAdapter_XData_Mapping_Dynamic_IFilterDescription_____">DataTable</a> method. The table name and the alias of the data source are passed as parameters. The alias of the data source will also be used as the alias of the table in the final SQL. See <a href="../../tutorial/mapping/dynamic/dynamic.html#tables">documentation topic</a> for more details</p>
<p>6) Description of the readonley property is done using the <a class="xref" href="../../api/XData.Mapping.Dynamic.IRepositoryStructure-1.html#XData_Mapping_Dynamic_IRepositoryStructure_1_ReadOnlyProperty__1_System_Linq_Expressions_Expression_System_Func__0___0___System_Linq_Expressions_Expression_System_Func_XData_Mapping_Dynamic_IRepositoryStructureAdapter__0____0___">ReadOnlyProperty</a> method. The description of the <em>DocStateId</em> property and its mapping described by the <a class="xref" href="../../api/XData.Mapping.Dynamic.IRepositoryStructureAdapter-1.html#XData_Mapping_Dynamic_IRepositoryStructureAdapter_1_Field__1_System_Linq_Expressions_Expression_System_Func_XData_Mapping_Dynamic_IRepositoryPropertyMappingAdapter__0___0__XData_Mapping_Dynamic_IStructureFlag_____">Field</a> method are transmitted to it. See <a href="../../tutorial/mapping/dynamic/dynamic.html#properties">documentation topic</a> for more details</p>
<p><em>Field</em> method parameters:</p>
<ul>
<li>The data source alias</li>
<li><em>string.Empty</em> is passed as the field name because the field name corresponds to the default conversion of the property name</li>
<li>a set of mapping modifiers: <ul>
<li>attribute of the key field of the data object <a class="xref" href="../../api/XData.Mapping.Dynamic.IPropertyMappingAdapter.html#XData_Mapping_Dynamic_IPropertyMappingAdapter_Key">Key</a></li>
<li>default value generation method <a class="xref" href="../../api/XData.Mapping.Dynamic.IRepositoryPropertyMappingAdapter-2.html#XData_Mapping_Dynamic_IRepositoryPropertyMappingAdapter_2_Default_XData_DefaultType_">Default</a> (the auto-increment database value is used here <a class="xref" href="../../api/XData.DefaultType.html">DefaultType.AutoIncrement</a>)</li>
</ul>
</li>
</ul>
<p>7) Mapping the usual properties available for both reading and writing is described by the <a class="xref" href="../../api/XData.Mapping.Dynamic.IRepositoryStructure-1.html#XData_Mapping_Dynamic_IRepositoryStructure_1_Map_System_Linq_Expressions_Expression_System_Func_XData_Mapping_Dynamic_IRepositoryStructureAdapter__0___0___System_Linq_Expressions_Expression_System_Func_XData_Mapping_Dynamic_IExternalLinkDefinitionAdapter__0__XData_Mapping_Dynamic_IExternalLinkDefinition_____">Map</a> method. Mapping of each field is described using the familiar <a class="xref" href="../../api/XData.Mapping.Dynamic.IRepositoryStructureAdapter-1.html#XData_Mapping_Dynamic_IRepositoryStructureAdapter_1_Field__1_System_Linq_Expressions_Expression_System_Func_XData_Mapping_Dynamic_IRepositoryPropertyMappingAdapter__0___0__XData_Mapping_Dynamic_IStructureFlag_____">Field</a> method. See <a href="../../tutorial/mapping/dynamic/dynamic.html#properties">documentation topic</a> for more details</p>
<p>8) The mapping is completed by the <a class="xref" href="../../api/XData.Mapping.Dynamic.IRepositoryDescription-1.html#XData_Mapping_Dynamic_IRepositoryDescription_1_SetBaseTable_System_String_">SetBaseTable</a> method, which determines the <a href="../../tutorial/glossary.html#base-table">base table</a> of the <a href="../../tutorial/glossary.html#data-object">data object</a> by the alias of the data source. See <a href="../../tutorial/mapping/dynamic/dynamic.html#mapping-parameters">documentation topic</a> for more details</p>
<p>9) We return to the description of the structure of the object itself and to the <a class="xref" href="../../api/XData.DataObjectExtensions.html#XData_DataObjectExtensions_GetProperty__2___0_System_Linq_Expressions_Expression_System_Func___0___1___">GetProperty</a> method with which we get the <em>DocStateId</em> readonly property value. See <a href="../../tutorial/mapping/mapping.html#readonly-properties">documentation topic</a> for more details</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/mickfierte/private/blob/main/doc/quick_start/asp_net_core/first_mapping.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
