## Фильтры времени исполнения
Фильтры времени исполнения используются для фильтрации данных по определенному полю (или результату SQL выражения) по значению которое будет известно лишь во время исполнения программы. Подобного результата можно добиться и используя фильтрацию посредством LINQ, но возможны случаи когда поле по которому нужно провести фильтрацию не входит в отраженный объект, либо необходимо провести фильтрацию, но при этом получить в результате не динамический запрос (см. [Поддержка LINQ](./linq.md) и [Динамические запросы](./queries.md)), а полноценный репозиторий, но отфильтрованный указанным образом.

Фильтры времени исполнения оформляются как статические свойства (field) отраженного класса типа [*RuntimeFilter*](https://htmlpreview.github.io/?https://raw.githubusercontent.com/mickfierte/XData/master/docs/doc/Contents/1/332.html). С помошью такого фильтра можно решить задачу проставления значения уже описанного в правилах объектного преобразования константного фильтра по имени (см. [Статическое описание преобразования - Константные фильтры](./static.md#Константные-фильтры) или [Динамическое описание преобразования - Константные фильтры](./dynamic.md#Константные-фильтры)), причем имя фильтра должно быть уникально не только в самом запросе, но и в его подзапросах. Если такого фильтра не будет найдено в итоговом запросе и всех его подзапросах, фильтр будет добавлен и инициализирован значением динамически.

>В случае когда предполагается динамического добавление нового фильтра кроме установки имени фильтруемого свойства и/или названия фильтра необходимо указать все необходимые его параметры по аналогии с константным фильтром(см. [Статическое описание преобразования - Константные фильтры](./static.md#Константные-фильтры) или [Динамическое описание преобразования - Константные фильтры](./dynamic.md#Константные-фильтры))

Проставление значения фильтра времени исполнения производится с помощью метода [*SetFilterValue*](https://htmlpreview.github.io/?https://raw.githubusercontent.com/mickfierte/XData/master/docs/doc/Contents/2/180.html) [репозитория](./glossary.md#Репозиторий).

Для очистки значения фильтра времени исполнения необходимо передать в качестве его значения **null**. 

Для сброса всех значений фильтров времени исполнения необходимо вызвать метод [*Reset*](https://htmlpreview.github.io/?https://raw.githubusercontent.com/mickfierte/XData/master/docs/doc/Contents/2/178.html) репозитория.

>При установке пустого значения необходимо учитывать назначенный этому фильтру [метод обработки пустых значений фильтров](./glossary.md#Методы-обработки-пустых-значений-фильтров)

```csharp
var rep = invoice.GetRepository();
var hist = XDataManager.GetRepository<DocHistory>(rep.Layer, context: rep.Context)
    .Reset()
    .SetFilterValue(DocHistory.FilterByDocId, invoice.GetProperty<long>("DocId"))
    .SetFilterValue(DocHistory.FilterByDocStateId, invoice.DocState.Key);
var newHist = hist.New();
newHist.HistoryDate = DateTime.UtcNow;
return hist.Submit(ref newHist);
```
